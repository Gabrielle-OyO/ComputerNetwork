# **第五章思考题**

## 5-1：网络层引言

√在参考模型上，网络层的上层和下层分别是什么？

下层--数据链路层、上层--传输层

√网络层的主要目标是什么？

把数据分组一路送到接收机。

√虚电路网络中，是否不需要进行路径选择？

需要

√数据报网络中，路由表从何而来？

每个分组独立选择路由 

√数据是怎样穿过数据报网络的？

离他近的数据分组进行发送数据包 查找路由表进行选择，拆乱的分组重新封装在进行传输

![image-20211108165224379](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108165224379.png)

√数据是怎样穿过虚电路网络的？

![image-20211108165245086](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108165245086.png)

## 5-2：IP地址

√IP的地址为什么要按类别分配？

如果不分网络位和主机位，路由器的路由表就是都是32位的地址，那所有的路由器维护的路由表会很大，转发速度会变慢（因为查询变慢）。而且所有的路由器都要有全Internet的地址，所有人的路由器都要有足够的性能来存下全网地址。

√你自己机器上的IP地址是多少？属于什么类别的IP地址？

√什么是保留地址？

使用保留地址的网络只能在内部进行通信，而不能与其他网络互连。因为本网络中的保留地址同样也可能被其它网络使用，如果进行网络互连，那么寻找路由时就会因为地址的不唯一而出现问题。但是这些使用保留地址的网络可以通过将本网络内的保留地址翻译转换成公共地址的方式实现与外部网络的互连。这也是保证网络安全的重要方法之一。

有全零、全1、广播地址、网络地址、环回地址等等

√保留地址有哪些？

一、0.0.0.0
二、255.255.255.255
三、127.0.0.1
四、224.0.0.1
五、169.254.x.x
六、10.x.x.x、172.16。x。x～172.31。x。x、192.168。x。x

## 5-3：子网规划

√为什么要划分子网？

 局域网不断增长，越来越难于管理，必须将它分割成子网
 一个网络被分隔成几个部分（子网），但是在外界看来，该网络仍被看成一个整体 (体现在路由表例上，就是外部的路由器只对应一条路由）
 这也允许不同的子网在一个组织内部连接起来

√子网规划的任务是什么？

- 提供灵活的编址
- 便于管理
- 广播抑制

√怎么来创建子网？

 子网规划：将大网络分割成小网络
![image-20211108170309003](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108170309003.png)
 借位原则
从主机域的高位开始借位；
主机域至少保留 2 位。

√子网掩码码有什么用？

 子网掩码
点分十进制（255.255.255.224）
网络位（/27）

√A、B、C三类地址的缺省掩码是什么？

A:255.0.0.0(/8)
B:255.255.0.0(/16)
C:255.255.255.0(24)

√子网规划的借位原则是怎样的？

高位开始借
至少保留2位主机位

√子网规划时要考虑什么因素？

 子网数量、主机位数量

## 5-4：IP寻址

√什么是IP寻址？

根据目的IP地址找到目的网络的过程

√什么是MAC寻址？

根据目的MAC地址，找到目的目的机的过程

√IP寻址和MAC寻址有什么不同？

1 适用的网络范围不同---MAC寻址只适合于小型网络
2 所依赖的地址结构不同---MAC是平面地址，IP是结构化、层次化地址，其本身携带了位置信息
3 所处的OSI模型层数不同
4 地址数目的限制---IP地址正在耗尽，而MAC地址暂无耗尽的危险
5 两种地址的格式不一样

√只用IP寻址，或只用MAC寻址是否可以完成找到目的机的任务？

通常要定位到目的机，是先通过IP寻址找到目的网络，再通过MAC寻址找到目的机。

√路由器处理分组的过程是怎样的？

解封装；确定目的网络，查表；转发
路由器决策的依据：路由表

√路由表是怎样的表？包括哪些主要字段？

 是一个存储在路由器或者联网计算机中的电子表格（文件）或类数据库。路由表存储着指向特定网络地址的路径（在有些情况下，还记录有路径的路由度量值）。路由表中含有网络周边的拓扑信息。路由表建立的主要目标是为了实现路由协议和静态路由选择。
destination：目的地址，用来标识IP包的目的地址或者目的网络。
mask：网络掩码，与目的地址一起标识目的主机或者路由器所在的网段的地址。
pre：标识路由加入IP路由表的优先级。可能到达一个目的地有多条路由，但是优先级的存在让他们先选择优先级高的路由进行利用。
cost：路由开销，当到达一个目的地的多个路由优先级相同时，路由开销最小的将成为最优路由。
interface：输出接口，说明IP包将从该路由器哪个接口转发。
nexthop：下一跳IP地址，说明IP包所经过的下一个路由器。

## 5-5：IP分组

√IP分组中包括哪些主要字段？

12字段20字长

![image-20211108171026568](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108171026568.png)

√怎样知道IP分组的净载荷中封装的是什么数据段呢？

√当路由器发现一个分组的TTL-1=0时，它会怎么对待这个分组？



√怎么知道一个分组是否包含有选项呢？

√尝试用WireShark抓取一个真实的分组，观察它的各字段值，并分析它。

 

## 5-6：什么是IPV6？

√IPv4有哪些问题？
移动性支持不够、地址危机、端到端业务模式、QoS和性能问题、配置复杂、安全问题、路由表的膨胀

√什么是IPv6？
IP version 6：是网际协议的最新版本，用作互联网的协议。用它来取代IPv4主要是为了解决IPv4地址枯竭问题，同时它也在其他方面对于IPv4有许多改进。
IPv6的设计目的是取代IPv4，然而长期以来IPv4在互联网流量中仍占据主要地位，IPv6的使用增长缓慢。在2019年12月，通过IPv6使用Google服务的用户百分率首次超过30%。

√IPv6的相关标准主要由哪个标准组织推出？
IETF http://www.ietf.org
 IP Version 6  Working Group： 制订IPv6规范和标准
 IPv6 Operations： 为运营IPv4/IPv6共存的Internet和在已有的IPv4网络或者新的网络安装中部署IPv6提供指导
 其它IPv6相关工作组：6lowpan, mip6, mipshop, monami6, multi6, shim6...

√IPv6在中国的发展现状如何？
 2004年12月25日，中国第一个下一代互联网示范工程（CNGI）核心网之一CERNET2主干网正式开通。
 2006年9月23日，下一代互联网骨干网核心技术通过验收。2006年度中国十大科技进展新闻是：下一代互联网技术获重大成果。

 

## 5-7：IPV6地址

√IPv4地址、MAC地址、IPv6地址分别是多少位二进制构成？
IPv4:32
MAC:48
IPv6:128

√IPv6链路本地地址怎么生成？
生成链路本地地址是自动配置的第一步。
FE80::/64
EUI-64
 前64位：FE80:0:0:0
 后64位：EUI-64地址

√IPv6地址自动配置过程是怎样的？
IPv6 的一个主要特征就是允许主机自动配置接口。通过相邻节点搜索，主机可以在本地链路上查找 IPv6 路由器并请求站点前缀。在自动配置过程中，主机将执行以下操作：

- 为每个接口创建链路本地地址，该操作不要求链路上有路由器。
- 检验地址在链路上是否唯一，该操作不要求链路上有路由器。
- 确定全局地址是应通过无状态机制、有状态机制还是这两种机制来获取。（要求链路上有路由器。）

√IPv6地址规划如何进行？

- IPv6地址规划需要考虑三个因素：路由性能，路由策略和安全；
- IPv6地址规划的目标：提供地址容量，实现节点通讯，实现互联网访问，IP地址的可视化映射。其中可视化映射最为关键。 
- 五种IPv6地址的分配技术：单调分配、稀疏分配、最适合分配，随机分配和前缀委托，每种分别举例说明。文章重点内容 
- 通过两个真实案例对比不同的分配实现技术，精华所在。
-  一般IPv6地址分配的参考指南 
- 对使用ULA(唯一本地地址)的考量，文单的建议是在私有领域使用ULA。 
- 重新编址对IPv6地址规划的影响，通常发生在ISP更换时。

 

## 5-8：IPV6分组

√IPv6分组基本头部包括了哪些字段？
![image-20211107202905816](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107202905816.png)

√相比IPv4分组，IPv6分组做了哪些删改？
![image-20211107202922177](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107202922177.png)

√相比IPv4分组，IPv6分组做了增加吗？怎加了什么字段？
修改的
 Addresses increased 32 bits -> 128 bits
 Time to Live -> Hop Limit（跳数限制）
 Protocol -> Next Header
 Type of Service -> Traffic Class（流量类别）
删掉的
 Fragmentation fields moved out of base header(主头部)
 IP options moved out of base header
 Header Checksum eliminated
 Header Length field eliminated
 Length field excludes IPv6 header
增加的
 Flow Label field added

 

## 5-9：IPV6过渡技术

√隧道技术适合什么应用场景？
早期阶段的IPv6孤岛阶段通信或者后期阶段的IPv4孤岛通信

√双栈技术适合什么应用场景？
IPv4向IPv6过度

√地址番翻译/转换技术适合什么应用场景？
纯IPv4、纯IPv6地址的之间的转换

√你认为全面取代IPv4的IPv6时代会很快到来吗？为什么？
不会，需要存在一段很长的过渡时期

## 5-10：路由从何而来？

√什么是静态路由？
管理员手工配置的路由

√静态路由有什么优点、缺点？
![image-20211107204439693](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107204439693.png)

√默认的静态路由有什么用处？
一种常用的静态路由：默认/缺省路由
是默认的路径，找不到路的时候可以从这里通过
•避免错误丢包
•缩减路由表的规模
•减少路由器的运行负担

√什么是动态路由？
由路由选择协议动态地建立、更新和维护的路由

√为什么需要动态路由？（优点）
适合大型的、经常变动的网络，需要维护开销
减少了网络管理员的负担

√按照原理划分，动态路由分为几类？
路由选择算法（Routing protocol）：
距离矢量路由选择（DV）---RIP：路由信息协议
链路状态路由选择（LS）---OSPF：开放的最短路径优先

√路由算法的目的是什么？
算法的目的是找到一条从源路由器到目的路由器的“好”路径（即具有最低费用的路径 [1]  ）。算法设计者的特定目标影响了该路由协议的操作；具体来说存在着多种路由算法，每种算法对网络和路由器资源的影响都不同；由于路由算法使用多种度量标准（metric），从而影响到最佳路径的计算。

√路径的常用量度有哪些？
跳数、带宽 

## 5-11：距离矢量路由选择协议

√什么距离矢量路由选择？
每个路由器维护一张表，表中列出了当前已知的到每个目标的最佳距离，以及为了到达那个目标，应该从哪个接口转发。

√DV的工作原理是怎样的？
 每个路由器（节点）**维护**两个向量， Di 和 Si ，分别表示从该路由器到所有其它路由器的距离及相应的下一跳（next hop）
 在邻居路由器之间**交换**路由信息（矢量）
 每个路由器（节点）根据收到的矢量信息，**更新**自己的路由表
 di1：从节点i到节点1的度量（代价）
 Si1 ：沿着从节点i到节点1的最优路径上的下一跳
 n ：网络中的节点数，节点从1、2、......、n

√运行DV的好处是什么？
简单

## 5-12：路由信息协议RIP

√什么RIP？
 RIP 是一种典型的D-V 路由选择协议
 RIP 采用了跳数（hop）（路由器的个数）作为量度（metric）
 当量度超过15 跳，目的被认为不可达
 默认地，每30秒钟交换一次矢量/向量信息（全部路由表）

√RIP的优点是什么？
简单

√RIP的缺点是什么？
 不能到达量度超过15跳的目标网络
 RIP的度量（代价）是跳数，即沿途经过的路由器的个数，有时候，并不合理，不能真正反映网络的状况
 实际运行中，会遇到度量计数到无穷、收敛慢等问题

√RIP的基本工作原理是怎样的？
主要工作原理是DV
![image-20211107210309333](file://C:/Users/18377/Desktop/2021-Autumn/%E8%AE%A1%E7%BD%91/NOTE/05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107210309333.png?lastModify=1636290222)

√如何配置RIP？
RIP实例

![image-20211107210514055](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107210514055.png)
![image-20211107210526169](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107210526169.png)

RIPv2实例
![image-20211107210637701](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107210637701.png)

## 5-13：RIP为什么衰落？

√DV的主要问题是什么？
DV路由可能遇到的问题：

- 路由环路（routing loop）
- 计数到无穷问题（Count to infinite）
- 收敛慢的问题（slow Convergence ）：相信错误的路由信息导致

√定义一个路径代价的最大数产生了什么后果？
错误信息传得慢，超过定义的跳数，不可达

√可以采用哪些方法来加快缓解路由环等问题？
水平分割（Split Horizon）
毒性逆转（Poison Reverse）
抑制定时器（Hold-Down Timers）
触发更新（Triggered Updates ）

√RIP会彻底消失吗？
不会，要站得高，看得远的路由协议

## 5-14：链路状态路由选择LS

√相比距离适量路由选择DV，链路状态路由选择LS具有哪些优点？
![image-20211107211642580](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107211642580.png)

√相比距离适量路由选择DV，链路状态路由选择LS具有哪些缺点？
![image-20211107211645928](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211107211645928.png)

√链路状态路由选择LS的基本工作原理是怎样的？你认为哪一步最关键？
发现邻居
设置成本
构造LSA
分发LSA
计算

分发LSA最关键

## 5-15：单区域OSPF

√OSPF的量度（代价、开销）采用了什么？一个100M的快速以太网链路，其量度是多少？
路由OSPF的度量值是cost代价！
OSPF对于接口的代价是10^8/Bandwidth
10M的接口,那代价就是10,
100M的接口,代价就是1,
1000M的接口,代价也是1,

√OSPF克服了路由环吗？为什么？
 每一条LSA都标记了生成者（用生成该LSA的路由器的RouterID标记），其他路由器只负责传输，这样不会在传输的过程中发生对该信息的改变和错误理解。
 路由计算的算法是SPF，计算的结果是一棵树，路由是树上的叶子节点，从根节点到叶子节点是单向不可回复的路径。
 区域之间通过规定骨干区域避免

√怎样建立全毗邻关系？
1）Down状态：路由器不与其他任何路由器交换任何OSPF消息；
2）Init状态：接收方路由器已经接收到对端路由器的hello包，但是没有从对端路由器的hello包中发现自己的router-id.。此时通信是单向的；
3）Two-Way状态：在收到的hello包中发现自己的router-id，说明此时已经是彼此发送hello包了；
4）一旦路由器进入Two-Way状态，他们就被认为是邻居。此时就要进行选举过程了，选出指定路由器（DR）,备份指定路由器（BDR）;
5）具有最高优先级的ospf路由器成为网段中的DR。如果优先级相同，具有最高路由器ID的路由器会成为DR;默认所有路由器的优先级都为1，优先级范围是从（0—255）；使用ip ospf priority命令在接口子配置模式下配置；选举出DR和BDR后，其他路由器就与DR和BDR形成邻接关系，但是其他路由器之间还是处于邻居关系，就是说还是处于TWO—WAY状态；
6）选举出DR和BDR后，路由器继续生成hello包以保持通信。这被认为是exstart状态，该状态下ospf路由器准备共享链路状态信息。
7）Exstart状态：DR和BDR与网段上的其他ospf路由器形成邻接关系，随后在每一个邻接关系中，具有最高路由器ID的路由器成为主路由器。注意，DR不必是交换过程中的主路由器。邻接关系中的剩下的路由器成为从路由器；
8）Exchang状态：主路由器首先开始和从路由器共享链路状态信息。就是说主路由器发送DBD包，如果说链路状态数据库比喻成一本书，那么DBD相当于这本书的目录，通过DBD包，可以发现自己所没有的信息。DBD包中包含链路状态类型，通告路由器的ID,通告链路的成本以及链路的序列号。
9）Loading状态：通过DBD包从路由器发现了自己所没有的信息后，从路由器会发送链路状态请求包给主路由器（LSR包），随后主路由器会向从路由器发送带有链路详细信息的链路状态更新包（LSU包,Link State Update）。从路由器将该信息合并到它的本地链路状态数据库中。从路由器会回应一个LSACK包给主路由器。
10）Full状态：此时LSDB已经一致了。此时每台ospf路由器可以独立计算初路由表了。
11）路由表计算：根据LSDB，以自己为根，用LSDB为原材料，采用spf算法独立计算出最有而且没有环路的树放入路由表中。

√为什么要选举DR？

 减少同步次数

## 5-16：无类域间路由 CIDR

√CIDR的功能是什么？

缓解了地址枯竭的趋势；控制甚至缩减了路由表的开销；控制、缩减了路由表的规模

√采用了CIDR技术，怎样完成路由聚合？

 缩减路由表规模
 隔离路由翻动

√怎样计算一个无类网络的可用/合法IP地址？

 一个IP地址是194.24.6.112，它的子网掩码是255.255.248.0；等同于194.24.6.112/21
 相应的子网络号是：194.24.00000000.0
 相应的主机位32-21=11，所以主机IP有2048个从00000 000.00000000=0.0到00000 111.11111111=7.255 

## 5-17：网络地址翻译 NAT

√为什么需要NAT/PAT？

Pv4总地址池已经枯竭（2011年2月3日）
每个上网设备都需要上网资源，包括IPv4地址，怎么办？
Private IP address：不可路由的地址、也可用于广域网链路上

√私人地址空间有哪些？

![image-20211108160612407](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108160612407.png)

√NAT转换器完成什么功能？

私有IP地址和公有IP地址之间的转换

√NAT有什么优点？
节省了公有IP地址；
提供了内部网访问外网的灵活性；
有一定的保密性。

√NAT有什么缺点？
影响了部分协议和应用的通信；
增加了网络延时；
NAT转换设备的性能可能成为网络的瓶颈；
影响了路由追踪工具的使用。



## 5-18：互联网控制消息协议 ICMP

√为什么需要ICMP？

IP分组传送不可靠，可能遭遇各种问题
 丢包，可能发生拥塞，产生很大延迟、抖动等
ICMP用来向源（通常）报告这些问题或状况
ICMP也常用来测试网络

√ICMP消息的封装格式是怎样的？

![image-20211108162409218](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108162409218.png)

√ICMP应用ping是利用的什么类型的消息？

 使用ping命令（即调用ping过程）时，将向目的站点发送一个ICMP回声请求报文（包括一些任选的数据），
 如目的站点接收到该报文，必须向源站点发回一个ICMP回声应答报文，源站点收到应答报文（且其中的任选数据与所发送的相同），则认为目的站点是可达的，否则为不可达。

![image-20211108162507349](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108162507349.png)

√ICMP应用tracert是利用的什么类型的消息？

  tracert过程是通过ICMP数据报超时报文来得到一张途经的路由器列表
 源主机向目的主机发一个IP报文，并置TTL为1，到达第一个路由器时，TTL减1，为0，则该路由器回发一个ICMP数据报超时报文，源主机取出路由器的IP地址即为途经的第一个路由端口地址

 接着源主机再向目的主机发第二个IP报文，并置TTL为2，然后再发第三个、第四个IP数据报，......直至到达目的主机
 但互联网的运行环境状态是动态的，每次路径的选择有可能不一致，所以，只有在相对较稳定（相对变化缓慢）的网络中，tracert才有意义

![image-20211108162541964](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108162541964.png)

![image-20211108162555091](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108162555091.png)

## 5-19：地址解析协议 ARP

√ARP工作原理是怎样的？

- 每台主机都会在自己的ARP缓冲区中建立一个 ARP列表，以表示IP地址和MAC地址的对应关系。
- 当源主机需要将一个数据包要发送到目的主机时，会首先检查自己 ARP列表中是否存在该 IP地址对应的MAC地址。
- 如果有，就直接将数据包发送到这个MAC地址；如果没有，就向本地网段发起一个ARP请求的广播包，查询此目的主机对应的MAC地址。
- 此ARP请求数据包里包括源主机的IP地址、硬件地址、以及目的主机的IP地址。网络中所有的主机收到这个ARP请求后，会检查数据包中的目的IP是否和自己的IP地址一致。
- 如果不相同就忽略此数据包；如果相同，该主机首先将发送端的MAC地址和IP地址添加到自己的ARP列表中。
- 如果ARP表中已经存在该IP的信息，则将其覆盖，然后给源主机发送一个 ARP响应数据包，告诉对方自己是它需要查找的MAC地址。
- 源主机收到这个ARP响应数据包后，将得到的目的主机的IP地址和MAC地址添加到自己的ARP列表中，并利用此信息开始数据的传输。
- 如果源主机一直没有收到ARP响应数据包，表示ARP查询失败。

![image-20211108163000669](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108163000669.png)

![image-20211108163010130](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108163010130.png)

![image-20211108163019297](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108163019297-1636363495177.png)

√远程主机的MAC地址如何解析？

缺省网关（代理ARP）

 当源设备需要的目的地址与自己不在同一个网络时，如果源不知道目的MAC地址，它必须使用路由器的服务使它的数据达到目的，当路由器在这种方式下使用时，称为缺省网关。
 缺省网关是与源设备所处的网段相连的路由器接口上的IP地址

√如何维护ARP表？

自动维护ARP表
通过广播ARP请求中的源设备信息添加更新表
利用自己的ARP请求之应答信息来添加、更新表
删除超过一定时限的信息

![image-20211108163325507](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108163325507.png)

√什么是默认网关/缺省网关？

默认网关，也叫缺省网关、简称网关，其实指的就是**路由器连接内网的接口地址**。

√ARP病毒是怎么产生的？

 通过伪造IP地址和MAC地址进行欺骗。使以太网数据包的源地址、目标地址和ARP通信数量剧增导致网络中断或中间人攻击。ARP攻击主要存在于局域网中。若其中一台计算机感染ARP病毒。就会试图通过ARP欺骗截获局域网内其他计算机的信息，造成局域网内的计算机通信故障。

## 5-20：拥塞控制

√拥塞的量度有哪些？

![image-20211108163852683](05%E7%AC%AC%E4%BA%94%E7%AB%A0%E6%80%9D%E8%80%83%E9%A2%98.assets/image-20211108163852683.png)

√怎么控制拥塞？

拥塞控制（Congestion control）任务：确保子网能够承载所到达的流量，这是个全局的问题，涉及到主机、路由器，存储转发的过程等方方面面的问题。

√抑制分组和逐条抑制分组是怎么控制拥塞的？

抑制分组生效时间慢，逐跳抑制可以快速缓解拥塞点压力。

Choke Packets（抑制分组）

路由器给源机发回一个抑制分组，并在抑制分组中指明原分组的目标地址
当源机收到抑制分组后，它会以某种百分比减少它发向该目标的流量
在一段固定的时间内，源机会忽略同样一个目标的抑制分组
过了这段时间，会继续侦听有无新的抑制分组，如果没有，源机将增加流量

逐跳抑制分组（Hop-by-Hop Choke Packets）

当网络速度很高或者路由器离源主机的距离很远的时候，给源主机发送抑制分组并不能很好地起作用，因为反应太慢

√载荷脱落有哪些策略？分别适合什么样的应用？

 丢掉分组：
 随机丢弃（random）（会丢弃重要的分组）
 丢弃新到达的(葡萄酒策略，适合文件传输类) 
 丢弃早到达的分组(牛奶策略，适合多媒体类)
 丢弃不太重要的（less important ）分组---需要发送方在它们的分组中标明优先级

## 5-21：流量整形

√什么流量整形？

 调节数据传输的平均速率（和突发数据流）
 算法
漏桶（leaky bucket）
令牌桶（token bucket）
其它：资源预留、准入控制、分组调度等
 可以减少拥塞

√漏桶的工作原理是怎样的？

算法描述
每个主机连接到网络的接口中都有一个漏桶，即一个优先长度的内部队列
当桶中有分组的时候，输出速率是恒定的，当桶空的时候，输出速率是0
当一个分组到达满的桶的时候，分组将被丢弃（满则溢）
每个时钟嘀嗒( tick )，仅允许一个分组或固定数量的分组发送出去

√令牌桶的工作原理是怎样的？

当大量数据突发的时候，令牌桶算法允许输出加快到某种程度
令牌桶拥有令牌（tokens），且以每△T秒产生一个令牌的速度往桶中输入令牌
一个分组要发送的时候，它必要从桶中取出和获取到一个令牌令牌桶算法允许累积令牌，但最多可以累积n（令牌桶的容量）个令牌

√试比较漏桶和令牌桶两种整形算法。

 令牌桶允许突发，但是最大突发受制于令牌桶容量的限制
 当桶满的时候，令牌桶算法丢掉的是令牌（不是分组