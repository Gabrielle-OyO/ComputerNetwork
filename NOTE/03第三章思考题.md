#  第三章思考题

#### 3-1：数据链路层概述

 √数据链路层在哪里？
层位于物理层之上、网络层之下。

 √数据链路层的主要功能是什么？
提供有效的、可靠的帧传输。

 √字符计数法成帧的主要缺点是什么？
一旦出错，无法恢复，即无法再同步；很少被使用。

 √字节填充的标记字节法的基本原理是什么？
该方法考虑了错误之后重新同步的问题，让每一帧都用一些特殊的字节作为开始和结束

 √比特填充的标记比特法的基本原理是什么？
向一个传输或存储器中添加额外的比特以保证达到标准容量的过程。又有说：在帧的标志字段中插入附加虚比特从而避免错误的处理过程为比特填充。

#### 3-2：差错处理概述

 √什么是码字？
包含数据位和校验位的n位单元。

 √什么是两个码字的海明距离？什么是全部码字的海明距离？
两个码字：两个码字之间不同位的数目。
全部码字：全部码字中任意两个码字之间海明距离的最小值。

 √差错的类型有哪两种？
比特差错、传输差错

 √海明距离跟检错有什么关系？
海明距离为d+1的编码能检测出d位差错。
因为在距离为d+1的检验码中，只改变d位的值，不可能产生另一个合法码。如奇偶校验码，海明距离为2，能查出单个错。

 √海明距离跟纠错有什么关系？
海明距离为2d+1的编码，能纠正d位差错。
因为此时，如果一个码字有d位发生差错，它仍然距离原来的码字距离最近，可以直接恢复为该码。

#### 3-3：纠1位错的海明码

 √16位数据位，需要纠1位错，冗余位应该为多少？ 要传输的数据是 m 位，冗余位 r  则r=5.
![image-20211031163412718](C:%5CUsers%5C18377%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211031163412718.png)

 √纠1位错的海明码，发送方怎样确定校验位？
将某一位数据位的编号展开成2的乘幂的和，那么每一项所对应的位即为该数据位的校验位(收方使用)。

 √纠1位错的海明码，接收方怎样判定收到的码字是否正确？如果出错了，怎么纠正成正确的码字？
海明码纠错过程( 接收端)
 首先将差错计数器置“0”，counter=0。
 当海明码数据到达接收端后，接收端逐个检查各个校验位的奇偶性。
 如发现某一校验位和它所检测的集合的奇偶性不正确，就将该检验位的编号加到差错计数器中。
Counter=0，无差错
counter ≠0，出错，该值指明出错的位

#### 3-4：检错码

 √什么是检错码？
一种编码，指在传输过程中发生错误后,在接收端能自动检查并发现错误的编码。常用的检错码有奇偶校验码、、恒比码等。

 √采用循环冗余校验码，发送方怎么做？
Sender
在数据帧的低端加上r个零，对应多项式为XrM(x)
采用模2除法，用G(x)去除XrM(x)，得余数
采用模2减法，用XrM(x)减去余数，得到带CRC校验和的帧

先在要发送的帧后面附加一个数（这个就是用来校验的校验码，但要注意，这里的数也是二进制序列的，下同），生成一个新帧发送给接收端。当然，这个附加的数不是随意的，它要使所生成的新帧能与发送端和接收端共同选定的某个特定数整除（注意，这里不是直接采用二进制除法，而是采用一种称之为"模2除法"）。

 √采用循环冗余校验码，接收方怎么做？
Receiver
用收到的幀去除以G（x）
为零：无错误产生
非零：发生了错误，重传

到达接收端后，再把接收到的新帧除以（同样采用"**模2除法**"）这个选定的除数。因为在发送端发送数据帧之前就已通过附加一个数，做了"去余"处理（也就已经能整除了），所以结果应该是没有余数。如果有余数，则表明该帧在传输过程中出现了差错。

 √循环冗余校验码，能够检查出多少位错误？
https://blog.csdn.net/weixin_39783156/article/details/111584443
一般情况下，r位生成多项式产生的CRC码可检测出所有的双错、奇数位错和突发长度小于等于r的突发错以及(1-2-(r-1))的突发长度为r+1的突发错和(1-2-r)的突发长度大于r+1的突发错。

#### 3-5：六个模拟协议之协议1~3

 √怎么解决接收方被大量数据所淹没？
在数据传输中，数据流量控制是一个能管理两个节点（数据发送方和数据接收方）之间数据传输速度的机制，由于数据发送方的发送速度和数据接收方的处理速度并不一致，数据流量控制为数据接收方提供了一种控制发送方传输速度的机制，使数据接收方节点不会被数据发送方节点发来的数据所淹没。

 √肯定确认重传技术是怎样工作的？
如果在协议中，发送方在准备下一个数据项目之前先等待一个肯定的确认，则这样的协议称为PAR（Positive Acknowledgement with Retransmission，支持重传的肯定确认协议）或者ARQ（Automatic Repeat Request，自动重复请求协议）。
自动重传请求（Automatic Repeat Request），通过接收方请求发送方重传出错的数据报文来恢复出错的报文，是通信中用于处理信道所带来差错的方法之一，有时也被称为后向纠错（Backward Error Correction，BEC）；另外一个方法是信道纠错编码。

 √重传定时器什么时候启动，什么时候拆除？
发送方每发出一个帧，启动一个重传定时器
超时前，如果收到收方的确认，拆除定时器
超时还未收到确认，重传，重置定时器
•数据帧丢失或错误
•确认帧丢失

 √接收方为什么会收到重复帧？
有噪声  发送端重复发送重复帧
![image-20211031170015000](C:%5CUsers%5C18377%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211031170015000.png)
解决：
•给每个帧一个独一无二的序列号
•序号也用来重组排序

 √如果发送的帧丢失了，意味着发方永远收不到这帧的确认，发方会死等确认帧（永远不可能到来）的到来吗？
不会。
解决：•定时器超期：重传

 √什么是捎带确认？
在计算机通信中，当一个数据帧到达的时候，接收方并不是立即发送一个单独的控制帧，而是抑制一下自己并且开始等待，直到网络层传递给它下一个分组。然后，确认信息被附在往外发送的数据帧上（使用帧头中的ack域）。实际上，确认报文搭了下一个外发数据帧的便车。这种“将确认暂时延迟以便可以钩到下一个外发数据帧”的技术称为捎带确认(piggybacking)。

#### 3-6：滑窗协议

 √为什么提出滑窗技术？
 滑窗技术可以批量收发数据，提高了信道利用率。

 √什么是发送窗口？
•对应着已经发送但还未被确认的帧的序号

 √发送窗口什么时候滑动？
收到了帧的确认。

 √什么是接收窗口？
•对应着期望接收的帧的序号

 √接收窗口什么时候滑动？
收到了期待接收的帧。

 √什么是带宽延迟积？
带宽延迟乘积=通道的链路容量与传输的往返延迟时间的乘积。

 √窗口值怎么确定？跟哪些因素有关？
窗口数的确认跟带宽延迟积正相关。

#### 3-7：回退n帧

 √回退n帧的工作原理是怎样的？
定义序列号seq的取值范围和滑动窗口长度W 
发送方连续发送至发送窗口满 
接收窗口为1，对出错帧不确认（引发超时） 
发送方超时重传，从未被确认帧开始
![img](https://img-blog.csdn.net/20180520154412747)
![image-20211031171134978](C:%5CUsers%5C18377%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211031171134978.png)
发送方
 正常发送：对帧编号，待确认帧缓存
 收到确认：释放确认帧所占缓冲区，滑动发送窗口
 差错帧超时时间到：回退到超时帧（出错帧），顺序重传最后被确认帧以后的缓冲区中缓存的帧
接收方
收到每一个期望的正确帧：上交网络层、回送确认
收到出错帧或非期望帧：丢弃，回送对接收的最后正确帧的确认
收到重传帧（即为一个期望的正确帧）

 √什么是累计确认？
n号帧的确认到达时，暗含一个意思：n-1、n-2.......等n号帧之前的帧也被确认
当采用了累计确认，收到了n帧的确认，n帧之前的帧都可从缓存中删掉。

 √如何确定回退n帧协议的窗口数？
 回退n帧的窗口数
发送窗口：W≤ MAX_SEQ
接收窗口：W=1

#### 3-8：选择性重传

 √什么是否定确认重传？有什么作用？
 接收窗口存储差错帧后继的所有正确帧
 发送方只重传差错帧
 接收方接收重传帧，按正确顺序将分组提交网络层

 √选择性重传的工作原理是怎样的？
发送方
 正常发送：对帧编号，待确认帧缓存
 收到确认：释放确认帧所占缓冲区，滑动发送窗口
 差错帧超时时间到：重传缓存的最后被确认帧以后的那一帧
接收方
 正常接收：上交网络层、回送确认，滑动接收窗口
 收到非期望的正确帧：缓存，回送对接收的最后正确帧的确认
 收到重传帧：将缓存帧排序上交，回送确认，滑动接收窗口
![image-20211031171549722](C:%5CUsers%5C18377%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20211031171549722.png)

 √如何确定选择性重传协议的窗口数？
发送窗口：0≤W≤(MAX_SEQ+1)/2
接收窗口：W≤(MAX_SEQ+1)/2
一般地：接收窗口小于发送窗口

